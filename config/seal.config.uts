/**
 * Seal Token ç»Ÿä¸€é…ç½®
 * 
 * ç”¨é€”ï¼šç®¡ç†ç§»åŠ¨ç«¯å’ŒPCç«¯çš„ Seal Token å…‘æ¢é…ç½®
 * åŒ…æ‹¬ï¼šæœ‰æ•ˆæœŸã€å¹³å°æ ‡è¯†ã€æ¥å£åœ°å€ç­‰
 * 
 * ğŸ¯ å¹³å°è¯´æ˜ï¼š
 * - mobile: uni-app ç§»åŠ¨ç«¯ï¼ŒåŒ…æ‹¬åŸç”Ÿé¡µé¢å’Œå†…åµŒçš„ WebViewï¼ˆH5é¡µé¢ï¼‰
 * - pc: PC ç®¡ç†åå°çš„ iframe
 * 
 * âš ï¸ é‡è¦è¯´æ˜ï¼š
 * H5 ä¸æ˜¯ç‹¬ç«‹å¹³å°ï¼ç§»åŠ¨ç«¯é€šè¿‡ <web-view> ç»„ä»¶åŠ è½½ seal-core çš„ H5 é¡µé¢ï¼Œ
 * æœ¬è´¨ä¸Šæ˜¯ç§»åŠ¨ç«¯çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ç»Ÿä¸€ä½¿ç”¨ 'mobile' é…ç½®ã€‚
 */

/**
 * å¹³å°ç±»å‹
 */
export enum PlatformType {
	MOBILE = 'mobile',        // ç§»åŠ¨ç«¯ï¼ˆåŒ…æ‹¬ uni-app åŸç”Ÿé¡µé¢å’Œ WebView ä¸­çš„ H5 é¡µé¢ï¼‰
	PC_IFRAME = 'pc-iframe'   // PCç«¯ iframe
}

/**
 * Seal Token é…ç½®æ¥å£
 */
export interface SealTokenConfig {
	expireMinutes: number;  // Token æœ‰æ•ˆæœŸï¼ˆåˆ†é’Ÿï¼‰
	platform: PlatformType; // å¹³å°æ ‡è¯†
	description: string;    // é…ç½®è¯´æ˜
}

/**
 * ç»Ÿä¸€ Seal Token é…ç½®
 */
export const SEAL_TOKEN_CONFIG: Record<string, SealTokenConfig> = {
	// ç§»åŠ¨ç«¯é…ç½®ï¼ˆåŒ…æ‹¬ uni-app åŸç”Ÿé¡µé¢å’Œ WebView ä¸­çš„ H5 é¡µé¢ï¼‰
	mobile: {
		expireMinutes: 30 * 24 * 60, // 30å¤©ï¼ˆ43200åˆ†é’Ÿï¼‰
		platform: PlatformType.MOBILE,
		description: 'APP åœºæ™¯ï¼ŒåŒ…æ‹¬åŸç”Ÿé¡µé¢å’Œå†…åµŒçš„ H5 WebViewï¼Œç”¨æˆ·é•¿æ—¶é—´ç™»å½•'
	},
	
	// PCç«¯é…ç½®
	pc: {
		expireMinutes: 2 * 60, // 2å°æ—¶ï¼ˆ120åˆ†é’Ÿï¼‰
		platform: PlatformType.PC_IFRAME,
		description: 'ç®¡ç†åå°ï¼Œå®‰å…¨è¦æ±‚é«˜ï¼ŒToken æœ‰æ•ˆæœŸçŸ­'
	}
};

/**
 * è·å–å¹³å°é…ç½®
 * 
 * @param platformKey å¹³å°æ ‡è¯†ï¼š'mobile' | 'pc'
 * @returns Seal Token é…ç½®
 * 
 * ğŸ¯ ä½¿ç”¨è¯´æ˜ï¼š
 * - ç§»åŠ¨ç«¯ uni-appï¼ˆåŒ…æ‹¬åŸç”Ÿé¡µé¢å’Œ WebViewï¼‰ï¼šä½¿ç”¨ 'mobile'
 * - PC ç®¡ç†åå° iframeï¼šä½¿ç”¨ 'pc'
 */
export function getSealTokenConfig(platformKey: string = 'mobile'): SealTokenConfig {
	const config = SEAL_TOKEN_CONFIG[platformKey];
	if (!config) {
		console.warn(`[Seal Config] æœªæ‰¾åˆ°å¹³å°é…ç½®: ${platformKey}ï¼Œä½¿ç”¨é»˜è®¤ç§»åŠ¨ç«¯é…ç½®`);
		return SEAL_TOKEN_CONFIG.mobile;
	}
	return config;
}

/**
 * æ—¥å¿—å‰ç¼€
 */
export const LOG_PREFIX = '[Seal Token]';

/**
 * âš ï¸ æ³¨æ„ï¼šSeal Core H5/PC URL é…ç½®å·²è¿ç§»åˆ° api/config.uts
 * è¯·ä» api/config.uts å¯¼å…¥ SEAL_CORE_H5_URL
 */

