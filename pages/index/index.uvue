<script lang="uts">
	import { getContractStatistics, ContractStatus } from '../../api/contracts/index';
	import type { ContractStatistics } from '../../api/contracts/index';
	import { checkAuthAndRedirect } from '../../api/auth';
	import { getSealPageUrl } from '../../api/seals/index';
	import { checkNetworkStatus, testH5ServiceAvailability } from '../../utils/network';
	import { getSealToken } from '../../utils/sealTokenManager';
	import { getEnterpriseList, EnterpriseStatus } from '../../api/enterprise/index';
	import { get } from '@/api/index';
	import PrivacyGuideModal from '../../components/PrivacyGuideModal.uvue';
	
	export default {
		components: {
			PrivacyGuideModal
		},
		async onLoad() {
			// æ£€æŸ¥éšç§åè®®åŒæ„çŠ¶æ€
			this.checkPrivacyAgreement();
			this.safeTop = this.getSafeTop();
		
			// æ£€æŸ¥ç™»å½•çŠ¶æ€
			if (!checkAuthAndRedirect(false)) {
				return;
			}
			// ğŸ”§ å…³é”®ä¿®å¤ï¼šå…ˆç¡®ä¿ sealToken å­˜åœ¨ä¸”æœ‰æ•ˆï¼Œå†å‘èµ·APIè¯·æ±‚
			try {
				await getSealToken();
			} catch (error) {
				console.error('[é¦–é¡µ] sealToken è·å–å¤±è´¥:', error);
			}
			// ä»æœ¬åœ°å­˜å‚¨åŠ è½½ä¸Šæ¬¡é€‰æ‹©çš„èº«ä»½
			this.loadIdentityFromStorage();
			// è·å–ç”¨æˆ·ä¿¡æ¯
			this.getUserInfo();
			// åŠ è½½åˆåŒæ‘˜è¦æ•°æ®
			this.loadContractSummary();
		},
		async onShow() {
			// æ£€æŸ¥ç™»å½•çŠ¶æ€
			if (!checkAuthAndRedirect(false)) {
				return;
			}
			this.safeTop = this.getSafeTop();
			// ğŸ”§ ç¡®ä¿ sealToken æœ‰æ•ˆ
			try {
				await getSealToken();
			} catch (error) {
				console.error('[é¦–é¡µ] sealToken è·å–å¤±è´¥:', error);
			}
			// ä»æœ¬åœ°å­˜å‚¨åŠ è½½èº«ä»½ï¼ˆç¡®ä¿ä¸ä¸ªäººä¸­å¿ƒåŒæ­¥ï¼‰
			this.loadIdentityFromStorage();
			// æ¯æ¬¡é¡µé¢æ˜¾ç¤ºæ—¶åˆ·æ–°æ•°æ®
			this.loadContractSummary();
		},
		onHide() {
			// é¡µé¢éšè—æ—¶å…³é—­å¼¹çª—
			this.showIdentityDropdown = false;
		},
		onPullDownRefresh() {
			// ä¸‹æ‹‰åˆ·æ–°
			this.loadContractSummary(true);
		},
		data() {
			return {
				safeTop: 0,
				// éšç§åè®®å¼•å¯¼å¼¹çª—
				showPrivacyModal: false,  // æ˜¯å¦æ˜¾ç¤ºéšç§åè®®å¼•å¯¼å¼¹çª—
				// èº«ä»½åˆ‡æ¢ç›¸å…³ï¼ˆå¤ç”¨ä¸ªäººä¸­å¿ƒé€»è¾‘ï¼‰
				showIdentityDropdown: false,  // æ˜¯å¦æ˜¾ç¤ºèº«ä»½åˆ‡æ¢å¼¹çª—
				currentIdentity: {
					type: 'personal',  // å½“å‰èº«ä»½ç±»å‹ï¼špersonal æˆ– enterprise
					id: '',  // èº«ä»½ID
					name: 'ä¸ªäºº',  // èº«ä»½åç§°
					verified: false,  // å½“å‰èº«ä»½æ˜¯å¦å·²è®¤è¯
					role: ''  // è§’è‰²ï¼ˆä¼ä¸šèº«ä»½æ‰æœ‰ï¼‰
				},
				// ä¼ä¸šåˆ—è¡¨
				enterprises: [] as any[],
				// ç”¨æˆ·ä¿¡æ¯ï¼ˆç”¨äºèº«ä»½åˆ‡æ¢ï¼‰
				userInfo: {
					id: '',
					name: '',
					isVerified: false
				},
				// çŠ¶æ€æ‘˜è¦æ•°æ®
				statusData: [
					{ label: 'ç­¾ç½²ä¸­', count: 0, color: '#1890FF' },
					{ label: 'å¡«å†™è¡¨å•', count: 0, color: '#FAAD14' },
					{ label: 'å·²å®Œæˆ', count: 0, color: '#00C28A' }
				],
				// æ˜¯å¦æ­£åœ¨åŠ è½½æ•°æ®
				isLoading: false,
				// å¿«é€Ÿå‘èµ·é€‰é¡¹
				quickStartItems: [
					{ icon: '/static/icons/template.png', label: 'æ¨¡æ¿å‘èµ·', path: '/pages/template-market/index' },
					{ icon: '/static/icons/folder.png', label: 'æ–‡ä»¶å‘èµ·', path: '/pages/contract-create/h5-create?type=file' },
					{ icon: '/static/icons/image.png', label: 'å›¾ç‰‡å‘èµ·', path: '/pages/contract-create/h5-create?type=image' },
					{ icon: '/static/icons/draft.png', label: 'è‰ç¨¿å‘èµ·', path: null } // åŠŸèƒ½æš‚æœªå¼€æ”¾ï¼Œä¸è®¾ç½®è·¯å¾„
				],
				// çƒ­é—¨æ¨¡æ¿æ•°æ®
				templates: [
					{ 
						name: 'å€Ÿæ¡', 
						description: 'è®©æ¯ä¸€ä»½æ‰¿è¯ºéƒ½æœ‰æ®å¯ä¾',
						buttonLabel: 'ç«‹å³ä½¿ç”¨',
						buttonColor: '#007BFF',
						image: '/static/templates/loan.png'
					},
					{
						name: 'æ”¶æ®',
						description: 'è®©æ¯ä¸€ç¬”èµ„é‡‘æµåŠ¨éƒ½æœ‰è¿¹å¯å¾ª',
						image: '/static/templates/receipt.png'
					},
					{
						name: 'ä¹°å–',
						description: 'è®©æ¯ä¸€æ¬¡äº¤æ˜“éƒ½å……æ»¡å®‰å¿ƒä¸ä¿¡èµ–',
						image: '/static/templates/purchase.png'
					}
				],
				// ç‰¹è‰²æœåŠ¡æ•°æ®
				features: [
			{
				name: 'å¤©çœ¼å®¡æŸ¥',
				description: 'AIä¸€é”®å®¡æŸ¥åˆåŒå†…å®¹ï¼Œå…¨å±€æŠŠæ§æ³•å¾‹é£é™©',
				icon: '/static/icons/blue-icon.png',
				iconColor: '#00C28A',
				path: '/pages/contract-audit/intro' // è·³è½¬åˆ°å¤©çœ¼å®¡æŸ¥å®£ä¼ é¡µ
			},
					{
						name: 'AIèµ·è‰',
						description: 'ä¸AIå¯¹è¯ï¼Œå¿«é€Ÿèµ·è‰ä¸“ä¸šåˆåŒ',
						icon: '/static/icons/green-icon.png',
						iconColor: '#00C28A',
						path: '/pages/ai-draft/index' // è·³è½¬åˆ°AIèµ·è‰é¡µé¢
					}
				]
			}
		},
		methods: {
			getSafeTop(): number {
				try {
					const sys: any = uni.getSystemInfoSync();
					let top = sys && sys.statusBarHeight ? Number(sys.statusBarHeight) : 0;
					const getMenuBtn: any = (uni as any).getMenuButtonBoundingClientRect;
					if (typeof getMenuBtn === 'function') {
						const rect: any = getMenuBtn();
						if (rect && rect.top) {
							top = Number(rect.top);
						}
					}
					return top;
				} catch (e) {
					return 0;
				}
			},
			// ========== éšç§åè®®ç›¸å…³æ–¹æ³• ==========
			
			/**
			 * æ£€æŸ¥éšç§åè®®åŒæ„çŠ¶æ€
			 */
			checkPrivacyAgreement(): void {
				try {
					const privacyStatus = uni.getStorageSync('privacyAgreementStatus');
					if (!privacyStatus) {
						// é¦–æ¬¡è®¿é—®ï¼Œæ˜¾ç¤ºéšç§åè®®å¼•å¯¼å¼¹çª—
						this.showPrivacyModal = true;
						console.log('[é¦–é¡µ] é¦–æ¬¡è®¿é—®ï¼Œæ˜¾ç¤ºéšç§åè®®å¼•å¯¼å¼¹çª—');
					} else if (privacyStatus === 'accepted') {
						console.log('[é¦–é¡µ] ç”¨æˆ·å·²åŒæ„éšç§åè®®');
					} else if (privacyStatus === 'declined') {
						console.log('[é¦–é¡µ] ç”¨æˆ·å·²æ‹’ç»éšç§åè®®');
					}
				} catch (error) {
					console.error('[é¦–é¡µ] æ£€æŸ¥éšç§åè®®çŠ¶æ€å¤±è´¥:', error);
				}
			},
			
			/**
			 * ç”¨æˆ·åŒæ„éšç§åè®®
			 */
			handlePrivacyAgree(): void {
				try {
					// ä¿å­˜åŒæ„çŠ¶æ€åˆ°æœ¬åœ°å­˜å‚¨
					uni.setStorageSync('privacyAgreementStatus', 'accepted');
					// å…³é—­å¼¹çª—
					this.showPrivacyModal = false;
					console.log('[é¦–é¡µ] ç”¨æˆ·å·²åŒæ„éšç§åè®®');
					
					// æ˜¾ç¤ºæˆåŠŸæç¤º
					uni.showToast({
						title: 'æ„Ÿè°¢æ‚¨çš„ä¿¡ä»»',
						icon: 'success',
						duration: 1500
					});
				} catch (error) {
					console.error('[é¦–é¡µ] ä¿å­˜éšç§åè®®åŒæ„çŠ¶æ€å¤±è´¥:', error);
					uni.showToast({
						title: 'æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•',
						icon: 'none',
						duration: 2000
					});
				}
			},
			
			/**
			 * ç”¨æˆ·ä¸åŒæ„éšç§åè®®
			 */
			handlePrivacyDisagree(): void {
				try {
					// ä¿å­˜æ‹’ç»çŠ¶æ€åˆ°æœ¬åœ°å­˜å‚¨
					uni.setStorageSync('privacyAgreementStatus', 'declined');
					// å…³é—­éšç§åè®®å¼¹çª—
					this.showPrivacyModal = false;
					console.log('[é¦–é¡µ] ç”¨æˆ·ä¸åŒæ„éšç§åè®®ï¼Œå·²å…³é—­å¼¹çª—');
					
					// æ˜¾ç¤ºæç¤ºä¿¡æ¯
					uni.showToast({
						title: 'æ‚¨å·²æ‹’ç»éšç§åè®®',
						icon: 'none',
						duration: 2000
					});
				} catch (error) {
					console.error('[é¦–é¡µ] ä¿å­˜éšç§åè®®çŠ¶æ€å¤±è´¥:', error);
				}
			},
			
			// ========== åŠŸèƒ½ç‚¹å‡»ç›¸å…³æ–¹æ³• ==========
			
			/**
			 * å¤„ç†åŠŸèƒ½ç‚¹å‡»
			 */
			handleItemClick(item: any): void {
				// å¦‚æœæ˜¯çŠ¶æ€æ‘˜è¦é¡¹ï¼Œè·³è½¬åˆ°åˆåŒç®¡ç†é¡µé¢å¹¶è®¾ç½®å¯¹åº”çš„çŠ¶æ€ç­›é€‰
				if (item.label === 'ç­¾ç½²ä¸­') {
					uni.switchTab({
						url: '/pages/contract-manage/index'
					});
					// è®¾ç½®çŠ¶æ€ç­›é€‰å‚æ•°
					uni.setStorageSync('contractStatus', ContractStatus.SIGNING);
					return;
				}
				
				if (item.label === 'å¡«å†™è¡¨å•') {
					uni.switchTab({
						url: '/pages/contract-manage/index'
					});
					uni.setStorageSync('contractStatus', ContractStatus.FORM_FILLING);
					return;
				}
				
				if (item.label === 'å·²å®Œæˆ') {
					uni.switchTab({
						url: '/pages/contract-manage/index'
					});
					uni.setStorageSync('contractStatus', ContractStatus.COMPLETED);
					return;
				}
				
				// å¦‚æœæ˜¯å¿«é€Ÿå‘èµ·é¡¹æˆ–ç‰¹è‰²æœåŠ¡é¡¹ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰è·¯å¾„
				if (item.path) {
					uni.navigateTo({
						url: item.path
					})
					return
				}
				
				// å¦‚æœæ˜¯æ¨¡æ¿é¡¹ï¼Œè·³è½¬åˆ°åˆåŒåˆ›å»ºé¡µé¢
				if (item.name) {
					uni.navigateTo({
						url: '/pages/contract-create/index'
					})
					return
				}
				
				// é»˜è®¤æç¤º
				uni.showToast({
					title: 'åŠŸèƒ½å¼€å‘ä¸­',
					icon: 'none'
				})
			},
			
			// å¤„ç†å¿«é€Ÿå‘èµ·é¡¹ç‚¹å‡»ï¼ˆå…ˆæ£€æµ‹H5æœåŠ¡ï¼Œå†è·³è½¬ï¼‰
			async handleQuickStartClick(item: any): Promise<void> {
				// è‰ç¨¿å‘èµ·åŠŸèƒ½æš‚æœªå¼€æ”¾ï¼ˆé€šè¿‡ path ä¸º null æˆ– label åˆ¤æ–­ï¼‰
				if (item.label === 'è‰ç¨¿å‘èµ·' || !item.path) {
					uni.showToast({
						title: 'è¯¥åŠŸèƒ½æš‚æœªå¼€æ”¾ï¼Œæ•¬è¯·æœŸå¾…',
						icon: 'none',
						duration: 2000
					});
					return;
				}
				
				// æ¨¡æ¿å‘èµ·ä¸éœ€è¦æ£€æµ‹H5æœåŠ¡
				if (item.path === '/pages/template-market/index') {
					uni.navigateTo({ url: item.path });
					return;
				}
				
				// æ–‡ä»¶å‘èµ·ã€å›¾ç‰‡å‘èµ·éœ€è¦æ£€æµ‹H5æœåŠ¡
				try {
					uni.showLoading({ title: 'æ­£åœ¨æ£€æµ‹æœåŠ¡...', mask: true });
					
					// æ­¥éª¤ 1: æ£€æŸ¥ç½‘ç»œçŠ¶æ€
					const networkResult = await checkNetworkStatus();
					if (!networkResult.success) {
						uni.hideLoading();
						uni.showModal({
							title: 'ç½‘ç»œå¼‚å¸¸',
							content: networkResult.errorMessage || 'è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•',
							showCancel: false
						});
						return;
					}
					
					// æ­¥éª¤ 2: è·å– H5 åˆ›å»ºåˆåŒ URL
					uni.showLoading({ title: 'æ­£åœ¨è¿æ¥æœåŠ¡...', mask: true });
					const type = item.path.includes('type=file') ? 'file' : 'image';
					
					// è·å–å½“å‰é€‰æ‹©çš„ä¼ä¸šID
					let enterpriseId: number | undefined = undefined;
					try {
						const savedIdentity = uni.getStorageSync('currentIdentity');
						if (savedIdentity) {
							const identity = JSON.parse(savedIdentity) as { type?: string; id?: number };
							if (identity && identity.type === 'enterprise' && identity.id) {
								enterpriseId = identity.id;
							}
						}
					} catch (e) {
						console.warn('[é¦–é¡µ] è·å–å½“å‰èº«ä»½ä¿¡æ¯å¤±è´¥:', e);
					}
					
					let createUrl: string;
					try {
						createUrl = await getSealPageUrl('create', undefined, { type, enterpriseId });
					} catch (error) {
						uni.hideLoading();
						uni.showModal({
							title: 'æœåŠ¡å¼‚å¸¸',
							content: 'æ— æ³•è¿æ¥åˆ°åˆ›å»ºæœåŠ¡\nè¯·ç¨åé‡è¯•æˆ–è”ç³»æŠ€æœ¯æ”¯æŒ',
							showCancel: false
						});
						return;
					}
					
					// æ­¥éª¤ 3: æµ‹è¯• H5 æœåŠ¡å™¨å¯ç”¨æ€§
					uni.showLoading({ title: 'æ­£åœ¨æ£€æµ‹æœåŠ¡çŠ¶æ€...', mask: true });
					const serviceResult = await testH5ServiceAvailability(createUrl, 8000);
					
					uni.hideLoading();
					
					if (!serviceResult.available) {
						uni.showModal({
							title: 'ç­¾ç½²æœåŠ¡æš‚æ—¶ä¸å¯ç”¨',
							content: serviceResult.errorMessage || 'H5ç­¾ç½²æœåŠ¡æš‚æ—¶æ— æ³•è®¿é—®\nè¯·ç¨åé‡è¯•æˆ–è”ç³»æŠ€æœ¯æ”¯æŒ',
							showCancel: false
						});
						return;
					}
					
					// æ­¥éª¤ 4: æ‰€æœ‰æ£€æµ‹é€šè¿‡ï¼Œè·³è½¬åˆ°åˆ›å»ºé¡µé¢
					uni.navigateTo({ url: item.path });
					
				} catch (error) {
					uni.hideLoading();
					uni.showModal({
						title: 'æ£€æµ‹å¤±è´¥',
						content: 'æ— æ³•å®ŒæˆæœåŠ¡æ£€æµ‹\nè¯·ç¨åé‡è¯•',
						showCancel: false
					});
				}
			},
			
			// å¤„ç†ç‰¹è‰²æœåŠ¡ç‚¹å‡»
			handleFeatureClick(feature: any): void {
				// åˆ¤æ–­æ˜¯å¦æ˜¯ tabBar é¡µé¢
				const tabBarPages = [
					'/pages/index/index',
					'/pages/contract-manage/index',
					'/pages/profile/index'
				]
				
				if (tabBarPages.includes(feature.path)) {
					// tabBar é¡µé¢ä½¿ç”¨ switchTab
					uni.switchTab({
						url: feature.path
					})
				} else {
					// æ™®é€šé¡µé¢ä½¿ç”¨ navigateTo
					uni.navigateTo({
						url: feature.path
					})
				}
			},
			
			// ========== èº«ä»½åˆ‡æ¢ç›¸å…³æ–¹æ³•ï¼ˆå¤ç”¨ä¸ªäººä¸­å¿ƒé€»è¾‘ï¼‰==========
			
			// è·å–ç”¨æˆ·ä¿¡æ¯
			async getUserInfo(): Promise<void> {
				try {
					console.log('[é¦–é¡µ] å¼€å§‹è·å–ç”¨æˆ·ä¿¡æ¯...');
					const res = await get<any>('/api/v1/member/user/get');
					
					console.log('[é¦–é¡µ] è·å–ç”¨æˆ·ä¿¡æ¯æˆåŠŸ:', JSON.stringify(res));
					
					// æ›´æ–°ç”¨æˆ·ä¿¡æ¯
					this.userInfo = {
						id: res.id?.toString() || '',
						name: res.nickname || 'æœªå‘½åç”¨æˆ·',
						isVerified: res.verifyStatus === 2
					};
					
					// å¦‚æœæ˜¯é¦–æ¬¡åŠ è½½ä¸”æœªä»ç¼“å­˜åŠ è½½ï¼Œåˆ™è®¾ç½®é»˜è®¤èº«ä»½
					if (!this.currentIdentity.id) {
						this.currentIdentity = {
							type: 'personal',
							id: this.userInfo.id,
							name: 'ä¸ªäºº',
							verified: this.userInfo.isVerified,
							role: ''
						};
						this.saveIdentityToStorage();
					} else if (this.currentIdentity.type === 'personal') {
						// å¦‚æœå½“å‰æ˜¯ä¸ªäººèº«ä»½ï¼Œæ›´æ–°è®¤è¯çŠ¶æ€
						this.currentIdentity.verified = this.userInfo.isVerified;
						this.currentIdentity.id = this.userInfo.id;
						this.saveIdentityToStorage();
					}
					
					// å¦‚æœç”¨æˆ·å·²è®¤è¯ï¼ŒåŠ è½½ä¼ä¸šåˆ—è¡¨
					if (this.userInfo.isVerified) {
						this.loadEnterpriseList();
					}
				} catch (error) {
					console.error('[é¦–é¡µ] è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error);
				}
			},
			
			// åŠ è½½ä¼ä¸šåˆ—è¡¨
			async loadEnterpriseList(): Promise<void> {
				try {
					console.log('[é¦–é¡µ] å¼€å§‹åŠ è½½ä¼ä¸šåˆ—è¡¨...');
					const response = await getEnterpriseList();
					
					console.log('[é¦–é¡µ] ä¼ä¸šåˆ—è¡¨APIå“åº”:', response);
					
					if (response && response.list) {
						this.enterprises = response.list.map(item => ({
							id: item.id,
							name: item.name,
							verified: item.status === EnterpriseStatus.VERIFIED,
							role: this.mapRoleToText(item.role)
						}));
						console.log('[é¦–é¡µ] ä¼ä¸šåˆ—è¡¨åŠ è½½æˆåŠŸï¼Œä¼ä¸šæ•°é‡:', this.enterprises.length);
						
						// å¦‚æœå½“å‰èº«ä»½æ˜¯ä¼ä¸šï¼Œæ›´æ–°ä¼ä¸šä¿¡æ¯
						if (this.currentIdentity.type === 'enterprise' && this.currentIdentity.id) {
							const currentEnterprise = this.enterprises.find(e => e.id === this.currentIdentity.id);
							if (currentEnterprise) {
								this.currentIdentity.role = currentEnterprise.role;
								this.currentIdentity.verified = currentEnterprise.verified;
								this.saveIdentityToStorage();
							}
						}
					}
				} catch (error) {
					console.error('[é¦–é¡µ] è·å–ä¼ä¸šåˆ—è¡¨å¤±è´¥:', error);
				}
			},
			
			// å°†APIè§’è‰²å€¼æ˜ å°„ä¸ºè§’è‰²æ–‡æœ¬
			mapRoleToText(role: number): string {
				switch (role) {
					case 1:
						return 'æ‰€æœ‰è€…';
					case 2:
						return 'ç®¡ç†å‘˜';
					case 3:
						return 'æˆå‘˜';
					default:
						return 'æˆå‘˜';
				}
			},
			
			// åˆ‡æ¢èº«ä»½ä¸‹æ‹‰èœå•
			toggleIdentityDropdown(): void {
				// åœ¨ç”¨æˆ·æœªå®åè®¤è¯çš„æƒ…å†µä¸‹ï¼Œä¸å…è®¸æ‰“å¼€èº«ä»½åˆ‡æ¢èœå•
				if (!this.userInfo.isVerified) {
					uni.showToast({
						title: 'è¯·å…ˆå®Œæˆå®åè®¤è¯',
						icon: 'none'
					});
					return;
				}
				this.showIdentityDropdown = !this.showIdentityDropdown;
			},
			
			// å…³é—­èº«ä»½ä¸‹æ‹‰èœå•
			closeIdentityDropdown(): void {
				this.showIdentityDropdown = false;
			},
			
			// åˆ‡æ¢èº«ä»½
			switchIdentity(type: string, enterprise: any = null): void {
				if (type === 'personal') {
					this.currentIdentity = {
						type: 'personal',
						id: this.userInfo.id || '',
						name: 'ä¸ªäºº',
						verified: this.userInfo.isVerified,
						role: ''
					};
					console.log('[é¦–é¡µ] åˆ‡æ¢åˆ°ä¸ªäººèº«ä»½');
				} else if (type === 'enterprise' && enterprise) {
					this.currentIdentity = {
						type: 'enterprise',
						id: enterprise.id,
						name: enterprise.name,
						verified: enterprise.verified,
						role: enterprise.role
					};
					console.log('[é¦–é¡µ] åˆ‡æ¢åˆ°ä¼ä¸šèº«ä»½:', enterprise.name);
				}
				
				// ä¿å­˜èº«ä»½é€‰æ‹©åˆ°æœ¬åœ°å­˜å‚¨
				this.saveIdentityToStorage();
				
				// å…³é—­ä¸‹æ‹‰èœå•
				this.closeIdentityDropdown();
				
				// åˆ·æ–°é¡µé¢æ•°æ®
				this.loadContractSummary();
				
				// æ˜¾ç¤ºåˆ‡æ¢æˆåŠŸæç¤º
				uni.showToast({
					title: 'å·²åˆ‡æ¢åˆ°' + this.currentIdentity.name,
					icon: 'none',
					duration: 1500
				});
			},
			
			// ä¿å­˜èº«ä»½é€‰æ‹©åˆ°æœ¬åœ°å­˜å‚¨
			saveIdentityToStorage(): void {
				uni.setStorageSync('currentIdentity', JSON.stringify(this.currentIdentity));
			},
			
			// ä»æœ¬åœ°å­˜å‚¨åŠ è½½èº«ä»½
			loadIdentityFromStorage(): void {
				try {
					const savedIdentity = uni.getStorageSync('currentIdentity');
					if (savedIdentity) {
						const parsedIdentity = JSON.parse(savedIdentity) as { type: string; id: string; name: string; verified: boolean; role: string };
						
						if (parsedIdentity) {
							// å…¼å®¹æ—§æ•°æ®
							if (parsedIdentity.type === 'personal' && parsedIdentity.name !== 'ä¸ªäºº') {
								parsedIdentity.name = 'ä¸ªäºº';
							}
							
							this.currentIdentity = parsedIdentity;
							console.log('[é¦–é¡µ] ä»æœ¬åœ°å­˜å‚¨åŠ è½½èº«ä»½:', this.currentIdentity.name);
						}
					}
				} catch (e) {
					console.error('[é¦–é¡µ] åŠ è½½èº«ä»½ä¿¡æ¯å¤±è´¥:', e);
				}
			},
			
			// æ·»åŠ æ–°ä¼ä¸š
			addEnterprise(): void {
				this.closeIdentityDropdown();
				uni.navigateTo({
					url: '/pages/enterprise/add'
				});
			},
			
			/**
			 * åŠ è½½åˆåŒç»Ÿè®¡æ•°æ®ï¼ˆçœŸå®APIï¼‰
			 */
			async loadContractSummary(isPullDown: boolean = false): Promise<void> {
				if (this.isLoading) return;
				
				this.isLoading = true;
				
				try {
					// è°ƒç”¨çœŸå®APIè·å–ç»Ÿè®¡æ•°æ®
					const stats: ContractStatistics = await getContractStatistics();
					
					console.log('åˆåŒç»Ÿè®¡æ•°æ®:', stats);
					
					// æ›´æ–°çŠ¶æ€æ‘˜è¦æ•°æ®
					this.statusData = [
						{ label: 'ç­¾ç½²ä¸­', count: stats.signingCount, color: '#1890FF' },
						{ label: 'å¡«å†™è¡¨å•', count: stats.formFillingCount, color: '#FAAD14' },
						{ label: 'å·²å®Œæˆ', count: stats.completedCount, color: '#00C28A' }
					];
					
					console.log('ç»Ÿè®¡æ•°æ®åŠ è½½æˆåŠŸ');
					
				} catch (error) {
					console.error('åŠ è½½åˆåŒç»Ÿè®¡å¤±è´¥:', error);
					uni.showToast({
						title: 'æ•°æ®åŠ è½½å¤±è´¥',
						icon: 'none'
					});
				} finally {
					this.isLoading = false;
					
					// å¦‚æœæ˜¯ä¸‹æ‹‰åˆ·æ–°ï¼Œåœæ­¢åˆ·æ–°åŠ¨ç”»
					if (isPullDown) {
						uni.stopPullDownRefresh();
					}
				}
			}
		}
	}
</script>

<template>
	<view class="contract-app">
		<!-- ç§»é™¤å…¨å±€å±‚çº§çš„çº¢ç‚¹æ ‡è®°ï¼Œé¿å…è¯»å–hasNotificationå±æ€§é”™è¯¯ -->
		
		<scroll-view scroll-y="true" class="content">
			<!-- é¡¶éƒ¨å¯¼èˆªæ  -->
			<view class="header" :style="{ '--safe-top': safeTop + 'px' }">
				<view class="header-dropdown-container">
					<view class="header-dropdown" @click="toggleIdentityDropdown">
						<text class="header-dropdown-text">{{ currentIdentity.type === 'personal' ? 'ä¸ªäºº' : 'ä¼ä¸š' }}</text>
						<text class="header-dropdown-icon">{{ showIdentityDropdown ? 'â–²' : 'â–¼' }}</text>
					</view>
				</view>
				
				<text class="header-title">Contract.Pro</text>
			</view>
			
			<!-- èº«ä»½åˆ‡æ¢å¼¹çª—é®ç½© -->
			<view v-if="showIdentityDropdown" class="identity-mask" @click="closeIdentityDropdown"></view>
			
			<!-- èº«ä»½åˆ‡æ¢å¼¹çª— -->
			<view v-if="showIdentityDropdown" class="identity-dropdown-container">
				<view class="identity-dropdown">
					<view class="dropdown-header">
						<text class="dropdown-title">åˆ‡æ¢èº«ä»½</text>
					</view>
					
					<!-- ä¸ªäººèº«ä»½ -->
					<view class="dropdown-section">
						<text class="section-label">ä¸ªäºº</text>
					</view>
					<view class="identity-option" :class="{ active: currentIdentity.type === 'personal' }" @click="switchIdentity('personal')">
						<view class="option-left">
							<view class="option-info">
								<view class="option-name-row">
									<text class="option-name">ä¸ªäºº</text>
								</view>
								<view class="option-status-row">
									<view class="option-verified" v-if="userInfo.isVerified">
										<text class="verified-text-small">å·²è®¤è¯</text>
									</view>
									<view class="option-unverified" v-else>
										<text class="unverified-text">æœªè®¤è¯</text>
									</view>
								</view>
							</view>
						</view>
						<text v-if="currentIdentity.type === 'personal'" class="option-check">âœ“</text>
					</view>
					
					<!-- ä¼ä¸šèº«ä»½ -->
					<view class="dropdown-section" v-if="enterprises.length > 0">
						<text class="section-label">ä¼ä¸šèº«ä»½</text>
					</view>
					<view v-if="enterprises.length > 0">
						<view v-for="(enterprise, index) in enterprises" :key="index" class="identity-option" :class="{ active: currentIdentity.type === 'enterprise' && currentIdentity.id === enterprise.id }" @click="switchIdentity('enterprise', enterprise)">
							<view class="option-left">
								<view class="option-info">
									<view class="option-name-row">
										<text class="option-name">{{ enterprise.name }}</text>
										<view class="option-role">
											<text class="role-text-small">{{ enterprise.role }}</text>
										</view>
									</view>
									<view class="option-status-row">
										<view v-if="enterprise.verified" class="option-verified">
											<text class="verified-text-small">å·²è®¤è¯</text>
										</view>
										<view v-else class="option-unverified">
											<text class="unverified-text">æœªè®¤è¯</text>
										</view>
									</view>
								</view>
							</view>
							<text v-if="currentIdentity.type === 'enterprise' && currentIdentity.id === enterprise.id" class="option-check">âœ“</text>
						</view>
					</view>
					
					<!-- æ·»åŠ æ–°ä¼ä¸š -->
					<view class="add-enterprise" @click="addEnterprise">
						<text class="add-icon">+</text>
						<text class="add-text">æ·»åŠ æ–°ä¼ä¸š</text>
					</view>
				</view>
			</view>
			
			<!-- å¿«é€Ÿå‘èµ·åˆåŒ - è°ƒæ•´ä½ç½®ä½¿å…¶æ‚¬æµ®åœ¨ç»¿è‰²èƒŒæ™¯ä¸Š -->
			<view class="card quick-start quick-start-floating">
				<text class="section-title">å¿«é€Ÿå‘èµ·</text>
				<view class="quick-start-grid">
					<view 
						v-for="(item, index) in quickStartItems" 
						:key="index" 
						class="quick-start-item"
						@click="handleQuickStartClick(item)"
					>
						<image class="quick-start-icon" :src="item.icon" mode="aspectFit"></image>
						<text class="quick-start-label">{{ item.label }}</text>
					</view>
				</view>
			</view>
			
			<!-- çŠ¶æ€æ‘˜è¦ -->
			<view class="card status-summary">
				<view class="status-grid">
					<view 
						v-for="(item, index) in statusData" 
						:key="index" 
						class="status-item"
						@click="handleItemClick(item)"
					>
						<!-- æç®€çŠ¶æ€é¡¹ç»“æ„ -->
						<view class="status-count-wrapper">
							<text class="status-count" :style="{ color: item.color }">{{ item.count }}</text>
							<!-- ç»™æ¯ä¸ªé¡¹ç›®å›ºå®šæ·»åŠ çº¢ç‚¹ï¼Œé€šè¿‡å®šä½ç¡®ä¿æ˜¾ç¤ºåœ¨å³ä¸Šè§’ -->
							<view class="notification-indicator" v-if="index < 2"></view>
						</view>
						<text class="status-label">{{ item.label }}</text>
					</view>
				</view>
			</view>
			
			<!-- çƒ­é—¨æ¨¡æ¿ -->
			<view class="card hot-templates">
				<view class="templates-header">
					<text class="section-title">çƒ­é—¨æ¨¡æ¿</text>
					<image class="official-tag" src="/static/templates/official-tag.png" mode="aspectFit"></image>
				</view>
				
				<view class="templates-main">
					<view class="templates-left" @click="handleItemClick(templates[0])">
						<image class="template-image" :src="templates[0].image" mode="aspectFit"></image>
					</view>
					<view class="templates-right-simplified">
						<view class="position-relative full-height">
							<image class="template-image-direct top-image" :src="templates[1].image" mode="aspectFit" @click="handleItemClick(templates[1])"></image>
							<image class="template-image-direct bottom-image" :src="templates[2].image" mode="aspectFit" @click="handleItemClick(templates[2])"></image>
						</view>
					</view>
				</view>
			</view>
			
			<!-- ç‰¹è‰²æœåŠ¡ -->
			<view class="card features">
				<text class="section-title">ç‰¹è‰²æœåŠ¡</text>
				<view class="features-list">
					<view 
						v-for="(feature, index) in features" 
						:key="index" 
						class="feature-item"
						@click="handleFeatureClick(feature)"
					>
						<view class="feature-icon-container" :style="{ backgroundColor: feature.iconColor + '10' }">
							<image class="feature-icon" :src="feature.icon" mode="aspectFit"></image>
						</view>
						<view class="feature-content">
							<text class="feature-name">{{ feature.name }}</text>
							<text class="feature-description">{{ feature.description }}</text>
						</view>
						<view class="feature-arrow-container">
							<text class="feature-arrow">â€º</text>
						</view>
					</view>
				</view>
			</view>
			
			<!-- ç‰ˆæƒä¿¡æ¯ -->
			<view class="copyright-section">
				<text class="copyright-title">Contract.Pro è®©ç­¾çº¦æ›´ç®€å•</text>
				<text class="copyright-text">Â©ï¸ å°ååŒå­¦ AI ç‰ˆæƒæ‰€æœ‰</text>
			</view>
			
			<!-- åº•éƒ¨å ä½ï¼Œé˜²æ­¢å†…å®¹è¢«TabBaré®æŒ¡ -->
			<view class="bottom-placeholder"></view>
		</scroll-view>
		
		<!-- éšç§åè®®å¼•å¯¼å¼¹çª— -->
		<PrivacyGuideModal 
			:show="showPrivacyModal" 
			@agree="handlePrivacyAgree" 
			@disagree="handlePrivacyDisagree"
		/>
	</view>
</template>

<style>
	/* å…¨å±€æ ·å¼å˜é‡ */
	.contract-app {
		flex: 1;
		background-color: #F7F9FC;
	}
	
	/* å†…å®¹åŒºåŸŸ */
	.content {
		flex: 1;
	}
	
	/* é¡¶éƒ¨å¯¼èˆªæ  */
	.header {
		height: 300rpx;
		background-image: linear-gradient(to bottom, #00C28A, #00C28A 70%, rgba(0, 194, 138, 0.8));
		padding: 60rpx 32rpx 20rpx;
		flex-direction: row;
		align-items: flex-start;
		justify-content: center;
		position: relative;
		padding-top: calc(60rpx + var(--safe-top));
	}
	
	.header-dropdown-container {
		position: absolute;
		top: calc(60rpx + var(--safe-top));
		left: 32rpx;
		z-index: 100;
	}
	
	.header-dropdown {
		flex-direction: row;
		align-items: center;
		background-color: rgba(255, 255, 255, 0.2);
		padding: 8rpx 16rpx;
		border-radius: 30rpx;
		max-width: 280rpx;
	}
	
	.header-dropdown-text {
		color: #FFFFFF;
		font-size: 24rpx;
		margin-right: 8rpx;
		max-width: 220rpx;
		overflow: hidden;
		text-overflow: ellipsis;
		lines: 1;
	}
	
	.header-dropdown-icon {
		color: #FFFFFF;
		font-size: 20rpx;
	}
	
	.header-title {
		color: #FFFFFF;
		font-size: 32rpx;
		font-weight: 500;
	}
	
	/* ========== èº«ä»½åˆ‡æ¢å¼¹çª—æ ·å¼ ========== */
	
	/* é®ç½©å±‚ */
	.identity-mask {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background-color: rgba(0, 0, 0, 0.5);
		z-index: 999;
	}
	
	/* å¼¹çª—å®¹å™¨ */
	.identity-dropdown-container {
		position: fixed;
		left: 0;
		right: 0;
		bottom: 0;
		z-index: 1000;
	}
	
	/* å¼¹çª—ä¸»ä½“ */
	.identity-dropdown {
		background-color: #FFFFFF;
		border-top-left-radius: 24rpx;
		border-top-right-radius: 24rpx;
		padding: 32rpx;
		max-height: 70vh;
	}
	
	/* å¼¹çª—æ ‡é¢˜ */
	.dropdown-header {
		align-items: center;
		margin-bottom: 24rpx;
		padding-bottom: 24rpx;
		border-bottom-width: 1rpx;
		border-bottom-color: #F0F0F0;
	}
	
	.dropdown-title {
		font-size: 32rpx;
		font-weight: 600;
		color: #333333;
	}
	
	/* åˆ†ç»„æ ‡é¢˜ */
	.dropdown-section {
		margin-top: 16rpx;
		margin-bottom: 12rpx;
	}
	
	.section-label {
		font-size: 24rpx;
		color: #999999;
	}
	
	/* èº«ä»½é€‰é¡¹ */
	.identity-option {
		flex-direction: row;
		align-items: center;
		justify-content: space-between;
		padding: 24rpx 16rpx;
		background-color: #F8F9FA;
		border-radius: 12rpx;
		margin-bottom: 12rpx;
	}
	
	.identity-option.active {
		background-color: #E8F8F3;
		border-width: 1rpx;
		border-color: #00C28A;
	}
	
	.option-left {
		flex: 1;
		flex-direction: row;
		align-items: center;
	}
	
	.option-info {
		flex: 1;
	}
	
	.option-name-row {
		flex-direction: row;
		align-items: center;
		margin-bottom: 8rpx;
	}
	
	.option-name {
		font-size: 28rpx;
		font-weight: 500;
		color: #333333;
		margin-right: 12rpx;
	}
	
	.option-role {
		background-color: #E8F8F3;
		padding: 4rpx 12rpx;
		border-radius: 16rpx;
	}
	
	.role-text-small {
		font-size: 20rpx;
		color: #00C28A;
	}
	
	.option-status-row {
		flex-direction: row;
		align-items: center;
	}
	
	.option-verified {
		flex-direction: row;
		align-items: center;
	}
	
	.verified-text-small {
		font-size: 22rpx;
		color: #00C28A;
	}
	
	.option-unverified {
		flex-direction: row;
		align-items: center;
	}
	
	.unverified-text {
		font-size: 22rpx;
		color: #FF9800;
	}
	
	.option-check {
		font-size: 32rpx;
		color: #00C28A;
		font-weight: bold;
	}
	
	/* æ·»åŠ æ–°ä¼ä¸š */
	.add-enterprise {
		flex-direction: row;
		align-items: center;
		justify-content: center;
		padding: 24rpx;
		margin-top: 16rpx;
		border-width: 1rpx;
		border-color: #E0E0E0;
		border-style: dashed;
		border-radius: 12rpx;
	}
	
	.add-icon {
		font-size: 32rpx;
		color: #00C28A;
		margin-right: 8rpx;
	}
	
	.add-text {
		font-size: 28rpx;
		color: #00C28A;
	}
	
	/* å¡ç‰‡é€šç”¨æ ·å¼ */
	.card {
		background-color: #FFFFFF;
		border-radius: 16rpx;
		margin: 0 16rpx 20rpx;
		padding: 24rpx;
		box-shadow: 0 2rpx 10rpx 0 rgba(0, 0, 0, 0.05);
		overflow: visible; /* ç¡®ä¿å¡ç‰‡ä¸ä¼šè£å‰ªæº¢å‡ºå†…å®¹ */
	}
	
	.section-title {
		font-size: 30rpx;
		font-weight: 500;
		color: #333333;
		margin-bottom: 24rpx;
	}
	
	/* çƒ­é—¨æ¨¡æ¿æ ‡é¢˜ç‰¹æ®Šæ ·å¼ */
	.hot-templates .section-title {
		margin-bottom: 0; /* ç§»é™¤åº•éƒ¨è¾¹è·ï¼Œä»¥ä¾¿åœ¨templates-headerä¸­æ­£ç¡®å¯¹é½ */
		line-height: 60rpx; /* ä¸templates-headeré«˜åº¦ä¸€è‡´ */
	}
	
	/* å¿«é€Ÿå‘èµ·åˆåŒ - æ·»åŠ æ‚¬æµ®æ ·å¼ */
	.quick-start-floating {
		margin-top: -60rpx; /* å‘ä¸Šåç§»ï¼Œä½¿å…¶æ‚¬æµ®åœ¨ç»¿è‰²èƒŒæ™¯ä¸Š */
		position: relative;
		z-index: 10; /* ç¡®ä¿å®ƒåœ¨ç»¿è‰²èƒŒæ™¯ä¹‹ä¸Š */
	}
	
	.quick-start-grid {
		flex-direction: row;
		flex-wrap: wrap;
		justify-content: space-between;
	}
	
	.quick-start-item {
		width: 25%;
		align-items: center;
		margin-bottom: 16rpx;
	}
	
	.quick-start-icon {
		width: 80rpx;
		height: 80rpx;
		margin-bottom: 8rpx;
	}
	
	.quick-start-label {
		font-size: 24rpx;
		color: #666666;
	}
	
	/* çŠ¶æ€æ‘˜è¦ */
	.status-summary {
		padding: 20rpx 30rpx;
		/* ç¡®ä¿å¡ç‰‡ä¸ä¼šè£å‰ªå†…å®¹ */
		overflow: visible;
	}
	
	.status-grid {
		flex-direction: row;
		justify-content: space-around;
		/* ç¡®ä¿ç½‘æ ¼ä¸ä¼šè£å‰ªå†…å®¹ */
		overflow: visible;
	}
	
	.status-item {
		align-items: center;
		min-width: 100rpx;
		display: flex;
		flex-direction: column;
		/* ç¡®ä¿çŠ¶æ€é¡¹ä¸ä¼šè£å‰ªå†…å®¹ */
		overflow: visible;
		padding: 10rpx 20rpx;
	}
	
	.status-count-wrapper {
		position: relative;
		margin-bottom: 12rpx;
		padding: 8rpx;
		margin: 0 10rpx 12rpx;
		/* ç¡®ä¿å®¹å™¨ä¸ä¼šè£å‰ªæº¢å‡ºå†…å®¹ */
		overflow: visible;
	}
	
	.status-count {
		font-size: 32rpx;
		font-weight: 600;
		text-align: center;
		padding-right: 8rpx; /* ä¸ºçº¢ç‚¹é¢„ç•™ä¸€ç‚¹é¢å¤–ç©ºé—´ */
	}
	
	/* ä¼˜åŒ–çš„çº¢ç‚¹æ ‡è®° - ä½¿ç”¨æ›´ç®€å•ã€æ›´å¯é çš„æ ·å¼ */
	.notification-indicator {
		position: absolute;
		right: -10rpx;
		top: -8rpx;
		width: 20rpx;
		height: 20rpx;
		border-radius: 50%;
		background-color: #FF0000;
		z-index: 10;
		border: 1.5rpx solid #FFFFFF;
	}
	
	.status-label {
		font-size: 24rpx;
		color: #666666;
	}
	
	/* çƒ­é—¨æ¨¡æ¿ - ä¿®å¤æ ‡é¢˜ä¸æ ‡ç­¾å¯¹é½é—®é¢˜ */
	.templates-header {
		flex-direction: row;
		align-items: center; /* ç¡®ä¿å‚ç›´å±…ä¸­å¯¹é½ */
		justify-content: flex-start; /* ç¡®ä¿å·¦å¯¹é½ */
		height: 60rpx; /* å›ºå®šé«˜åº¦ä»¥ä¾¿å¯¹é½ */
	}
	
	.official-tag {
		width: 120rpx;
		height: 36rpx; /* è°ƒæ•´é«˜åº¦ä»¥æ›´å¥½åœ°å¯¹é½ */
		margin-left: 16rpx;
		margin-top: 2rpx; /* å¾®è°ƒå‚ç›´ä½ç½® */
	}
	
	.hot-templates {
		overflow: hidden;
	}
	
	.templates-main {
		flex-direction: row;
		width: 100%;
		gap: 15rpx; /* ç¨å¾®å‡å°‘é—´è· */
		justify-content: center;
		align-items: center;
		margin-top: 10rpx; /* æ·»åŠ é€‚å½“çš„é¡¶éƒ¨é—´è· */
	}
	
	/* å·¦ä¾§ï¼šå€Ÿæ¡ */
	.templates-left {
		width: 48%; /* å¢åŠ å®½åº¦ */
		margin-right: 0;
		border-radius: 12rpx;
		overflow: hidden;
		height: 340rpx; /* å¢åŠ é«˜åº¦ */
	}
	
	.template-image {
		width: 100%;
		height: 100%;
		display: block;
	}
	
	/* å³ä¾§ï¼šæ”¶æ®å’Œä¹°å– - å½»åº•æ¶ˆé™¤é—´è· */
	.templates-right-simplified {
		width: 48%; /* å¢åŠ å®½åº¦ */
		margin: 0 0 0 0;
		padding: 0 0 0 0;
		display: flex;
		flex-direction: column;
		height: 340rpx; /* å¢åŠ é«˜åº¦ */
		gap: 0; 
		border-radius: 12rpx;
		overflow: hidden;
		box-sizing: border-box;
		font-size: 0;
		line-height: 0;
		position: relative;
	}
	
	.position-relative {
		position: relative;
	}
	
	.full-height {
		height: 100%;
	}
	
	.template-image-direct {
		width: 100%;
		display: block;
		object-fit: contain;
		box-sizing: border-box;
		margin: 0;
		padding: 0;
	}
	
	.top-image {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		height: 55%;
	}
	
	.bottom-image {
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		height: 55%;
	}
	
	/* ç‰¹è‰²æœåŠ¡ */
	.features-list {
	}
	
	.feature-item {
		flex-direction: row;
		align-items: center;
		padding: 24rpx 0;
		border-bottom-width: 1rpx;
		border-bottom-color: #EEEEEE;
	}
	
	.feature-item:last-child {
		border-bottom-width: 0;
	}
	
	.feature-icon-container {
		width: 80rpx;
		height: 80rpx;
		border-radius: 16rpx;
		align-items: center;
		justify-content: center;
		margin-right: 24rpx;
	}
	
	.feature-icon {
		width: 48rpx;
		height: 48rpx;
	}
	
	.feature-content {
		flex: 1;
	}
	
	.feature-name {
		font-size: 28rpx;
		color: #333333;
		font-weight: 500;
		margin-bottom: 8rpx;
	}
	
	.feature-description {
		font-size: 24rpx;
		color: #999999;
	}
	
	.feature-arrow-container {
		display: flex;
		align-items: center;
		justify-content: center;
		margin-left: 16rpx;
	}
	
	.feature-arrow {
		color: #CCCCCC;
		font-size: 36rpx;
		font-weight: 300;
		line-height: 36rpx;
		transform: scaleY(1.2); /* ç¨å¾®æ‹‰ä¼¸ï¼Œä½¿å…¶æ›´åœ†æ¶¦ */
	}
	
	/* ç‰ˆæƒä¿¡æ¯ */
	.copyright-section {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		padding: 12rpx 32rpx 8rpx;
		margin-top: 0;
	}
	
	.copyright-title {
		font-size: 24rpx;
		font-weight: 400;
		color: #999999;
		line-height: 32rpx;
		margin-bottom: 2rpx;
	}
	
	.copyright-text {
		font-size: 22rpx;
		color: #BBBBBB;
		line-height: 30rpx;
	}
	
	/* åº•éƒ¨å ä½ */
	.bottom-placeholder {
		height: 120rpx;
	}
	
	/* çƒ­é—¨æ¨¡æ¿å¡ç‰‡ç‰¹æ®Šæ ·å¼ */
	.hot-templates.card {
		margin: 0 16rpx 20rpx; /* å‡å°‘å·¦å³å¤–è¾¹è· */
		padding: 20rpx 20rpx 20rpx; /* è‡ªå®šä¹‰å†…è¾¹è· */
	}
	
	.quick-start.card {
		padding: 20rpx 20rpx 15rpx; /* è‡ªå®šä¹‰å†…è¾¹è· */
	}
	
	/* å…¨å±€å›ºå®šä½ç½®çš„çº¢ç‚¹æ ·å¼ */
	.global-notification-dot {
		position: absolute;
		width: 20rpx;
		height: 20rpx;
		border-radius: 10rpx;
		background-color: #FF0000;
		z-index: 9999;
		box-shadow: 0 0 0 2rpx #FFFFFF;
	}
</style> 