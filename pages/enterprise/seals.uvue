<template>
  <view class="container">
    <!-- ä¼ä¸šä¿¡æ¯å¡ç‰‡ -->
    <view class="enterprise-card">
      <view class="enterprise-logo">
        <image :src="enterpriseLogo" mode="aspectFill"></image>
      </view>
      <view class="enterprise-info">
        <text class="enterprise-name">{{ enterpriseName }}</text>
        <view class="enterprise-status" v-if="isVerified">
          <text class="status-icon fa fa-circle-check"></text>
          <text class="status-text">å·²è®¤è¯</text>
        </view>
        <text class="enterprise-credit-code" v-if="enterpriseCreditCode">{{ enterpriseCreditCode }}</text>
      </view>
    </view>
    
    <!-- å†…å®¹åŒºåŸŸ -->
    <scroll-view class="content-section" scroll-y="true" @scrolltolower="loadMore">
      <!-- è®¡æ•°ä¸æ–°å»ºæŒ‰é’®åŒº -->
      <view class="header-actions">
        <view class="counter-badge">
          <text class="counter-text">{{ total }} ä¸ªå°ç« </text>
        </view>
        
        <view class="create-button" @click="createSeal">
          <text class="create-text">+ æ–°å»ºå°ç« </text>
        </view>
      </view>
      
      <!-- å°ç« åˆ—è¡¨ -->
      <view class="seal-list" v-if="sealList.length > 0">
        <view class="seal-item" v-for="(seal, index) in sealList" :key="seal.id">
          <view class="seal-card" :class="{'default-seal': seal.isDefault}">
            <!-- å¡ç‰‡é¡¶éƒ¨ä¿¡æ¯ -->
            <view class="card-header" :class="{
              'header-official': seal.type === 1, 
              'header-finance': seal.type === 2,
              'header-contract': seal.type === 3
            }">
              <view class="seal-badge">
                <text class="badge-text">{{ getSealTypeText(seal.type) }}</text>
              </view>
              <view class="enterprise-seal-tag">
                <text class="enterprise-seal-text">ä¼ä¸šå°ç« </text>
              </view>
            </view>
            
            <!-- å¡ç‰‡ä¸»ä½“å†…å®¹ -->
            <view class="card-body">
              <!-- å°ç« å›¾åƒåŒºåŸŸ -->
              <view class="seal-image-wrapper">
                <image 
                  class="seal-image" 
                  :src="seal.image" 
                  mode="aspectFit"
                  @error="handleImageError(seal)"
                  @load="handleImageLoad(seal)"
                ></image>
              </view>
              
              <!-- å°ç« ä¿¡æ¯åŒºåŸŸ -->
              <view class="seal-info">
                <view class="seal-name-row">
                  <text class="seal-name">{{ seal.name }}</text>
                  <!-- å°ç« çŠ¶æ€æ ‡ç­¾ -->
                  <view v-if="seal.status === 1" class="status-tag status-disabled">
                    <text class="status-icon fa fa-ban"></text>
                    <text class="status-text">å·²ç¦ç”¨</text>
                  </view>
                </view>
                
                <view class="seal-meta">
                  <view class="meta-section time-section">
                    <view class="meta-label-row">
                      <text class="meta-label">åˆ›å»ºæ—¶é—´</text>
                    </view>
                    <view class="meta-value-row">
                      <text class="time-icon">â—</text>
                      <text class="meta-value">{{ formatDate(seal.createTime) }}</text>
                    </view>
                  </view>
                  
                  <view class="meta-section auth-section">
                    <view class="meta-label-row">
                      <text class="meta-label">æˆæƒæˆå‘˜</text>
                      <view class="count-badge">
                        <text class="count-text">{{ seal.grantCount || 0 }}</text>
                      </view>
                    </view>
                  </view>
                </view>
              </view>
            </view>
            
            <!-- å¡ç‰‡åº•éƒ¨æ“ä½œåŒº -->
            <view class="card-footer">
              <!-- å¯ç”¨/ç¦ç”¨æŒ‰é’® -->
              <view 
                v-if="seal.status === 1" 
                class="action-button enable-btn" 
                @click="toggleSealStatus(seal, 0)"
              >
                <text class="action-icon fa fa-check-circle"></text>
                <text class="action-text">å¯ç”¨</text>
              </view>
              <view 
                v-else 
                class="action-button disable-btn" 
                @click="toggleSealStatus(seal, 1)"
              >
                <text class="action-icon fa fa-ban"></text>
                <text class="action-text">ç¦ç”¨</text>
              </view>
              
              <view class="action-button auth-btn" @click="authSeal(seal)">
                <text class="action-icon fa fa-user-cog"></text>
                <text class="action-text">æˆæƒç®¡ç†</text>
              </view>
              <view class="action-button delete-btn" @click="deleteSeal(seal)">
                <text class="action-icon fa fa-trash"></text>
                <text class="action-text">åˆ é™¤</text>
              </view>
            </view>
          </view>
        </view>
      </view>
      
      <!-- æ— å°ç« æç¤º -->
      <view class="empty-state" v-if="sealList.length === 0 && !loading">
        <image class="empty-image" src="/static/icons/template.png" mode="aspectFit"></image>
        <text class="empty-title">æš‚æ— ä¼ä¸šå°ç« </text>
        <text class="empty-subtitle">åˆ›å»ºä¼ä¸šå°ç« ï¼Œåœ¨åˆåŒç­¾ç½²æ—¶ä½¿ç”¨</text>
        <view class="empty-action" @click="createSeal">
          <text class="empty-action-text">+ åˆ›å»ºç¬¬ä¸€ä¸ªå°ç« </text>
        </view>
      </view>
      
      <!-- åŠ è½½ä¸­æç¤º -->
      <view class="loading-state" v-if="loading">
        <view class="loading-spinner"></view>
        <text class="loading-text">åŠ è½½ä¸­...</text>
      </view>
      
      <!-- åº•éƒ¨æç¤º -->
      <view class="footer-tips">
        <view class="tip-item">
          <text class="tip-text">Â· ä¼ä¸šå°ç« éœ€è¦æˆæƒåæ‰èƒ½ä½¿ç”¨</text>
        </view>
        <view class="tip-item">
          <text class="tip-text">Â· ä¸ªäººå°ç« è¯·åœ¨ä¸ªäººèº«ä»½ä¸‹ç®¡ç†</text>
        </view>
      </view>
    </scroll-view>
  </view>
</template>

<script>
import { 
  getEnterpriseSealPage, 
  deleteEnterpriseSeal,
  getEnterpriseDetail,
  updateSeal
} from '../../api/enterprise/index';

export default {
  data() {
    return {
      enterpriseId: 0,
      enterpriseName: "ä¼ä¸šåç§°",
      enterpriseCreditCode: "", // ç»Ÿä¸€ç¤¾ä¼šä¿¡ç”¨ä»£ç 
      enterpriseLogo: "/static/icons/blue-icon.png",
      isVerified: false, // ä¼ä¸šè®¤è¯çŠ¶æ€
      searchText: '',
      loading: true,
      sealList: [] as any[],
      pageNo: 1,
      pageSize: 10,
      hasMore: false,
      total: 0
    };
  },
  async onLoad(options) {
    if (options && options.id) {
      this.enterpriseId = Number(options.id);
      // åŠ è½½ä¼ä¸šè¯¦æƒ…
      await this.loadEnterpriseDetail();
    } else {
      // å¦‚æœæ²¡æœ‰ä¼ å…¥ä¼ä¸šIDï¼Œåˆ™ä»ç¼“å­˜æˆ–å…¨å±€çŠ¶æ€è·å–
      const currentEnterprise = uni.getStorageSync('currentEnterprise');
      if (currentEnterprise) {
        try {
          const enterpriseData = JSON.parse(currentEnterprise);
          this.enterpriseId = enterpriseData.id;
          this.enterpriseName = enterpriseData.name || "ä¼ä¸šåç§°";
          this.enterpriseCreditCode = enterpriseData.creditCode || "";
          this.enterpriseLogo = enterpriseData.logo || "/static/icons/blue-icon.png";
          this.isVerified = enterpriseData.status === 1;
        } catch (e) {
          console.error('è§£æä¼ä¸šä¿¡æ¯å¤±è´¥:', e);
          this.enterpriseId = currentEnterprise.id;
        }
      }
    }
    
    // åŠ è½½å°ç« åˆ—è¡¨
    this.loadSealList();
  },
  
  onShow() {
    // ğŸ¯ é¡µé¢æ˜¾ç¤ºæ—¶æ£€æŸ¥æ˜¯å¦éœ€è¦åˆ·æ–°
    // ä»å°ç« åˆ›å»ºé¡µé¢è¿”å›æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨
    console.log('[ä¼ä¸šå°ç« ] é¡µé¢æ˜¾ç¤ºï¼Œæ£€æŸ¥åˆ·æ–°æ ‡è®°');
  },
  
  onPullDownRefresh() {
    // ä¸‹æ‹‰åˆ·æ–°
    this.loadSealList(true).then(() => {
      uni.stopPullDownRefresh();
    });
  },
  
  mounted() {
    // ğŸ¯ ç›‘å¬å°ç« åˆ›å»ºæˆåŠŸçš„å…¨å±€äº‹ä»¶
    uni.$on('refreshEnterpriseSealList', this.handleRefreshEvent);
    console.log('[ä¼ä¸šå°ç« ] å·²æ³¨å†Œåˆ·æ–°äº‹ä»¶ç›‘å¬');
  },
  
  beforeUnmount() {
    // ğŸ¯ é¡µé¢é”€æ¯å‰ç§»é™¤äº‹ä»¶ç›‘å¬
    uni.$off('refreshEnterpriseSealList', this.handleRefreshEvent);
    console.log('[ä¼ä¸šå°ç« ] å·²ç§»é™¤åˆ·æ–°äº‹ä»¶ç›‘å¬');
  },
  
  methods: {
    // ğŸ¯ å¤„ç†å°ç« åˆ—è¡¨åˆ·æ–°äº‹ä»¶
    handleRefreshEvent() {
      console.log('[ä¼ä¸šå°ç« ] æ”¶åˆ°åˆ·æ–°äº‹ä»¶ï¼Œå¼€å§‹åˆ·æ–°åˆ—è¡¨');
      this.loadSealList(true);
    },
    
    // åŠ è½½ä¼ä¸šè¯¦æƒ…
    async loadEnterpriseDetail() {
      try {
        console.log('[ä¼ä¸šå°ç« ] ğŸ” å¼€å§‹åŠ è½½ä¼ä¸šè¯¦æƒ…, enterpriseId:', this.enterpriseId);
        
        // âœ… request å‡½æ•°å·²ç»è‡ªåŠ¨è§£åŒ…ï¼Œè¿”å›çš„ç›´æ¥å°±æ˜¯ Enterprise å¯¹è±¡
        const enterprise = await getEnterpriseDetail(this.enterpriseId);
        
        console.log('[ä¼ä¸šå°ç« ] âœ… è·å–åˆ°ä¼ä¸šæ•°æ®:', JSON.stringify(enterprise));
        
        if (enterprise) {
          // âœ… ç›´æ¥ä½¿ç”¨ enterpriseï¼Œä¸éœ€è¦ .data
          this.enterpriseName = enterprise.name || "ä¼ä¸šåç§°";
          this.enterpriseCreditCode = enterprise.creditCode || "";
          this.enterpriseLogo = enterprise.logo || "/static/icons/blue-icon.png";
          this.isVerified = enterprise.status === 1; // 1è¡¨ç¤ºå·²è®¤è¯
          
          console.log('[ä¼ä¸šå°ç« ] ğŸ¯ æ•°æ®å·²èµ‹å€¼:', {
            name: this.enterpriseName,
            creditCode: this.enterpriseCreditCode,
            logo: this.enterpriseLogo,
            isVerified: this.isVerified
          });
          
          // å¼ºåˆ¶åˆ·æ–°è§†å›¾
          this.$forceUpdate();
        } else {
          console.error('[ä¼ä¸šå°ç« ] âŒ ä¼ä¸šæ•°æ®ä¸ºç©º');
        }
      } catch (error) {
        console.error('[ä¼ä¸šå°ç« ] âŒ è·å–ä¼ä¸šè¯¦æƒ…å¤±è´¥:', error);
        uni.showToast({
          title: 'è·å–ä¼ä¸šä¿¡æ¯å¤±è´¥',
          icon: 'none'
        });
      }
    },
    
    // åŠ è½½å°ç« åˆ—è¡¨
    async loadSealList(isRefresh = false) {
      if (isRefresh) {
        this.pageNo = 1;
        this.sealList = [];
      }
      
      this.loading = true;
      
      try {
        const params = {
          enterpriseId: this.enterpriseId,
          pageNo: this.pageNo,
          pageSize: this.pageSize,
          name: this.searchText
        };
        
        // âœ… è·å–å°ç« åˆ—è¡¨ï¼Œresponse å·²ç»è¢« request å‡½æ•°è‡ªåŠ¨è§£åŒ…
        const response = await getEnterpriseSealPage(params);
        
        if (response && Array.isArray(response.list)) {
          // ğŸ”§ æ•°æ®æ˜ å°„ï¼šå°† sealData å­—æ®µæ˜ å°„åˆ° image å­—æ®µï¼ˆå…¼å®¹å‰ç«¯æ˜¾ç¤ºï¼‰
          const mappedList = response.list.map(seal => {
            const imageUrl = seal.sealData || seal.image;
            console.log(`[ä¼ä¸šå°ç« ] å°ç«  ${seal.name} å›¾ç‰‡URL:`, imageUrl);
            return {
              ...seal,
              image: imageUrl // ä¼˜å…ˆä½¿ç”¨ sealDataï¼Œå›é€€åˆ° image
            };
          });
          
          if (isRefresh) {
            this.sealList = mappedList;
          } else {
            // âœ… åˆå¹¶åˆ—è¡¨
            this.sealList = [...this.sealList, ...mappedList];
          }
          
          this.total = response.total || 0;
          this.hasMore = this.sealList.length < this.total;
          
          console.log(`[ä¼ä¸šå°ç« ] åŠ è½½æˆåŠŸï¼š${mappedList.length} ä¸ªå°ç« ï¼Œæ€»è®¡ ${this.total} ä¸ª`);
          
          if (this.hasMore) {
            this.pageNo++;
          }
        }
      } catch (error) {
        console.error('è·å–å°ç« åˆ—è¡¨å¤±è´¥:', error);
        uni.showToast({
          title: 'è·å–å°ç« åˆ—è¡¨å¤±è´¥',
          icon: 'none'
        });
      }
      
      this.loading = false;
    },
    
    // åŠ è½½æ›´å¤š
    loadMore() {
      if (this.hasMore && !this.loading) {
        this.loadSealList();
      }
    },
    
    // å¤„ç†æœç´¢
    handleSearch() {
      this.loadSealList(true);
    },
    
    // åˆ›å»ºå°ç« 
    createSeal() {
      uni.navigateTo({
        url: `/pages/enterprise/seal-create?enterpriseId=${this.enterpriseId}`
      });
    },
    
    // æˆæƒå°ç« 
    authSeal(seal) {
      // ğŸ”§ ä¿®å¤:ä¼ é€’ enterpriseId å‚æ•°ç»™æˆæƒç®¡ç†é¡µé¢
      uni.navigateTo({
        url: `/pages/enterprise/seal-authorize?id=${seal.id}&enterpriseId=${this.enterpriseId}`
      });
    },
    
    // åˆ‡æ¢å°ç« çŠ¶æ€ï¼ˆå¯ç”¨/ç¦ç”¨ï¼‰
    async toggleSealStatus(seal, newStatus) {
      const statusText = newStatus === 0 ? 'å¯ç”¨' : 'ç¦ç”¨';
      const confirmText = newStatus === 0 
        ? `ç¡®å®šè¦å¯ç”¨å°ç« "${seal.name}"å—ï¼Ÿå¯ç”¨åå°†å¯ä»¥æ­£å¸¸ä½¿ç”¨å’Œæˆæƒã€‚`
        : `ç¡®å®šè¦ç¦ç”¨å°ç« "${seal.name}"å—ï¼Ÿç¦ç”¨åå°†æ— æ³•ä½¿ç”¨ï¼Œå·²æˆæƒçš„ç”¨æˆ·ä¹Ÿæ— æ³•ä½¿ç”¨æ­¤å°ç« ã€‚`;
      
      uni.showModal({
        title: `${statusText}å°ç« `,
        content: confirmText,
        success: async (res) => {
          if (res.confirm) {
            try {
              // è°ƒç”¨ updateSeal API æ›´æ–°å°ç« çŠ¶æ€
              // âœ… updateSeal åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œéœ€è¦ä¼ é€’å®Œæ•´çš„å°ç« å¯¹è±¡
              await updateSeal({
                id: seal.id,
                name: seal.name,
                type: seal.type,
                generationMethod: seal.generationMethod,
                sealData: seal.sealData, // âœ… åç«¯å­—æ®µåä¸º sealData
                status: newStatus,
                enterpriseId: seal.enterpriseId
              });
              
              uni.showToast({
                title: `${statusText}æˆåŠŸ`,
                icon: 'success'
              });
              
              // é‡æ–°åŠ è½½å°ç« åˆ—è¡¨
              this.loadSealList(true);
            } catch (error) {
              console.error(`${statusText}å°ç« å¤±è´¥:`, error);
              uni.showToast({
                title: `${statusText}å¤±è´¥`,
                icon: 'none'
              });
            }
          }
        }
      });
    },
    
    // åˆ é™¤å°ç« 
    deleteSeal(seal) {
      uni.showModal({
        title: 'åˆ é™¤å°ç« ',
        content: `ç¡®å®šè¦åˆ é™¤å°ç« "${seal.name}"å—ï¼Ÿåˆ é™¤åä¸å¯æ¢å¤ã€‚`,
        success: async (res) => {
          if (res.confirm) {
            try {
              // âœ… deleteEnterpriseSeal è¿”å› Promise<boolean>
              const success = await deleteEnterpriseSeal(seal.id);
              
              if (success) {
                uni.showToast({
                  title: 'åˆ é™¤æˆåŠŸ',
                  icon: 'success'
                });
                
                // é‡æ–°åŠ è½½å°ç« åˆ—è¡¨
                this.loadSealList(true);
              } else {
                uni.showToast({
                  title: 'åˆ é™¤å¤±è´¥',
                  icon: 'none'
                });
              }
            } catch (error) {
              console.error('åˆ é™¤å°ç« å¤±è´¥:', error);
              uni.showToast({
                title: 'åˆ é™¤å°ç« å¤±è´¥',
                icon: 'none'
              });
            }
          }
        }
      });
    },
    
    // æ ¼å¼åŒ–æ—¥æœŸ
    formatDate(timestamp) {
      if (!timestamp) return '';
      
      const date = new Date(timestamp);
      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;
    },
    
    // è·å–å°ç« ç±»å‹æ–‡æœ¬
    getSealTypeText(type) {
      switch (type) {
        case 1:
          return 'å…¬ç« ';
        case 2:
          return 'è´¢åŠ¡ç« ';
        case 3:
          return 'åˆåŒç« ';
        default:
          return 'å…¶ä»–';
      }
    },
    
    // å¤„ç†å›¾ç‰‡åŠ è½½é”™è¯¯
    handleImageError(seal) {
      console.error(`[ä¼ä¸šå°ç« ] âŒ å›¾ç‰‡åŠ è½½å¤±è´¥: ${seal.name}, URL: ${seal.image}`);
      uni.showToast({
        title: `å°ç« "${seal.name}"å›¾ç‰‡åŠ è½½å¤±è´¥`,
        icon: 'none',
        duration: 2000
      });
    },
    
    // å¤„ç†å›¾ç‰‡åŠ è½½æˆåŠŸ
    handleImageLoad(seal) {
      console.log(`[ä¼ä¸šå°ç« ] âœ… å›¾ç‰‡åŠ è½½æˆåŠŸ: ${seal.name}, URL: ${seal.image}`);
    }
  }
};
</script>

<style lang="scss">
/* æ ¹å®¹å™¨ */
.container {
  flex: 1;
  background-color: #F7F9FC;
}

.enterprise-card {
  background-color: #FFFFFF;
  margin: 20rpx;
  padding: 24rpx;
  border-radius: 16rpx;
  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);
  display: flex;
  flex-direction: row;
  align-items: center;
}

.enterprise-logo {
  width: 88rpx;
  height: 88rpx;
  border-radius: 12rpx;
  overflow: hidden;
  margin-right: 20rpx;
  box-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.1);
}

.enterprise-logo image {
  width: 100%;
  height: 100%;
}

.enterprise-info {
  flex: 1;
}

.enterprise-name {
  font-size: 34rpx;
  font-weight: bold;
  color: #333333;
  margin-bottom: 6rpx;
}

.enterprise-status {
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-bottom: 6rpx;
}

.status-icon {
  font-size: 24rpx;
  color: #00C28A;
  margin-right: 6rpx;
}

.status-text {
  font-size: 24rpx;
  color: #00C28A;
}

.enterprise-credit-code {
  font-size: 22rpx;
  color: #999999;
}

/* å†…å®¹åŒºåŸŸ */
.content-section {
  flex: 1;
}

/* å¤´éƒ¨æ“ä½œåŒº */
.header-actions {
  padding: 30rpx;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
}

.counter-badge {
  background-color: rgba(0, 194, 138, 0.1);
  padding: 12rpx 24rpx;
  border-radius: 30rpx;
}

.counter-text {
  font-size: 28rpx;
  color: #00C28A;
  font-weight: 500;
}

.create-button {
  background-color: #00C28A;
  padding: 12rpx 32rpx;
  border-radius: 30rpx;
}

.create-text {
  font-size: 28rpx;
  color: #FFFFFF;
  font-weight: 500;
}

/* å°ç« åˆ—è¡¨ */
.seal-list {
  padding: 0 30rpx 30rpx;
}

.seal-item {
  margin-bottom: 30rpx;
}

/* å°ç« å¡ç‰‡ */
.seal-card {
  background-color: #FFFFFF;
  border-radius: 20rpx;
  overflow: hidden;
  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);
  border: 1rpx solid #F0F0F0;
}

.seal-card.default-seal {
  border: 2rpx solid #00C28A;
  box-shadow: 0 4rpx 12rpx rgba(0, 194, 138, 0.15);
}

/* å¡ç‰‡å¤´éƒ¨ - å»æ‰æ¸å˜ï¼Œä½¿ç”¨çº¯è‰² */
.card-header {
  padding: 20rpx 24rpx;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  background-color: #F7F9FC;
}

.card-header.header-official {
  background-color: #EEF2FF;
}

.card-header.header-finance {
  background-color: #FFF1F2;
}

.card-header.header-contract {
  background-color: #EFF6FF;
}

.seal-badge {
  background-color: #FFFFFF;
  padding: 8rpx 20rpx;
  border-radius: 30rpx;
  border: 1rpx solid #E5E7EB;
}

.badge-text {
  font-size: 26rpx;
  font-weight: 600;
  color: #374151;
}

.card-header.header-official .badge-text {
  color: #4F46E5;
}

.card-header.header-finance .badge-text {
  color: #DC2626;
}

.card-header.header-contract .badge-text {
  color: #2563EB;
}

.enterprise-seal-tag {
  background-color: rgba(0, 194, 138, 0.1);
  border: 1rpx solid rgba(0, 194, 138, 0.2);
  padding: 6rpx 16rpx;
  border-radius: 30rpx;
}

.enterprise-seal-text {
  font-size: 22rpx;
  color: #00C28A;
  font-weight: 500;
}

/* å¡ç‰‡ä¸»ä½“ */
.card-body {
  padding: 24rpx;
  flex-direction: row;
}

.seal-image-wrapper {
  width: 160rpx;
  height: 160rpx;
  justify-content: center;
  align-items: center;
  margin-right: 24rpx;
  background-color: #FAFAFA;
  border-radius: 12rpx;
  border: 1rpx solid #E5E7EB;
}

.seal-image {
  width: 140rpx;
  height: 140rpx;
  border-radius: 8rpx;
  display: block;
}

.seal-info {
  flex: 1;
  flex-direction: column;
  justify-content: space-between;
}

.seal-name-row {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 12rpx;
  margin-bottom: 12rpx;
  width: 100%;  /* ğŸ¯ ç¡®ä¿å æ»¡å®½åº¦ */
}

.seal-name {
  flex: 1;  /* ğŸ¯ å æ®å‰©ä½™ç©ºé—´ */
  font-size: 30rpx;
  font-weight: 600;
  color: #303133;
  overflow: hidden;  /* ğŸ¯ éšè—æº¢å‡ºå†…å®¹ */
  text-overflow: ellipsis;  /* ğŸ¯ æ˜¾ç¤ºçœç•¥å· */
  white-space: nowrap;  /* ğŸ¯ ä¸æ¢è¡Œ */
}

/* å°ç« çŠ¶æ€æ ‡ç­¾æ ·å¼ */
.status-tag {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 4rpx;
  padding: 4rpx 10rpx;
  border-radius: 16rpx;
  flex-shrink: 0;  /* ğŸ¯ é˜²æ­¢çŠ¶æ€æ ‡ç­¾è¢«å‹ç¼© */
}

.status-tag.status-disabled {
  background-color: rgba(245, 108, 108, 0.1);
}

.status-tag.status-disabled .status-icon {
  color: #F56C6C;
  font-size: 20rpx;
}

.status-tag.status-disabled .status-text {
  color: #F56C6C;
  font-size: 20rpx;
  font-weight: 500;
}

.seal-time {
  font-size: 24rpx;
  color: #909399;
  margin-bottom: 16rpx;
}

/* ç©ºçŠ¶æ€ */
.empty-container {
  padding: 120rpx 30rpx;
  justify-content: center;
  align-items: center;
}

.empty-image {
  width: 240rpx;
  height: 240rpx;
  margin-bottom: 32rpx;
  opacity: 0.6;
}

.empty-text {
  font-size: 28rpx;
  color: #909399;
  margin-bottom: 12rpx;
}

.empty-sub-text {
  font-size: 24rpx;
  color: #C0C4CC;
}

/* åŠ è½½æ›´å¤š */
.load-more {
  padding: 30rpx;
  justify-content: center;
  align-items: center;
}

.load-more-text {
  font-size: 24rpx;
  color: #909399;
}

/* åŠ è½½ä¸­ */
.loading-container {
  padding: 120rpx 30rpx;
  justify-content: center;
  align-items: center;
}

.loading-spinner {
  width: 60rpx;
  height: 60rpx;
  border: 4rpx solid #F5F7FA;
  border-top-color: #00C28A;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading-text {
  font-size: 28rpx;
  color: #909399;
  margin-top: 24rpx;
}

/* å°ç« å…ƒæ•°æ® */
.seal-meta {
  flex-direction: row;
  justify-content: space-between;
  margin-top: 16rpx;
}

.meta-section {
  flex: 1;
  flex-direction: column;
}

.time-section {
  margin-right: 24rpx;
}

.auth-section {
  align-items: flex-end;
}

.meta-label-row {
  margin-bottom: 8rpx;
}

.meta-label {
  font-size: 24rpx;
  color: #909399;
}

.meta-value-row {
  flex-direction: row;
  align-items: center;
}

.time-icon {
  font-size: 20rpx;
  color: #00C28A;
  margin-right: 8rpx;
}

.meta-value {
  font-size: 26rpx;
  color: #606266;
}

.count-badge {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  background-color: rgba(0, 194, 138, 0.1);
  padding: 4rpx 12rpx;
  border-radius: 20rpx;
  margin-left: 8rpx;
  min-width: 40rpx;
}

.count-text {
  font-size: 22rpx;
  color: #00C28A;
  font-weight: 600;
  text-align: center;
}

/* å¡ç‰‡åº•éƒ¨æ“ä½œ */
.card-footer {
  padding: 16rpx 24rpx;
  flex-direction: row;
  justify-content: space-between;
  gap: 16rpx;
  border-top: 1rpx solid #F0F2F5;
}

.action-button {
  flex: 1;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  padding: 16rpx 20rpx;
  border-radius: 10rpx;
  gap: 8rpx;
}

.action-icon {
  font-size: 30rpx;
}

.action-text {
  font-size: 28rpx;
  font-weight: 500;
}

/* å¯ç”¨æŒ‰é’® */
.enable-btn {
  background-color: #ECFDF5;
  border: 1rpx solid #D1FAE5;
}

.enable-btn .action-icon {
  color: #00C28A;
}

.enable-btn .action-text {
  color: #00C28A;
}

/* ç¦ç”¨æŒ‰é’® */
.disable-btn {
  background-color: #FEF3F2;
  border: 1rpx solid #FED7D7;
}

.disable-btn .action-icon {
  color: #F56C6C;
}

.disable-btn .action-text {
  color: #F56C6C;
}

/* æˆæƒç®¡ç†æŒ‰é’® */
.auth-btn {
  background-color: #EFF6FF;
  border: 1rpx solid #DBEAFE;
}

.auth-btn .action-icon {
  color: #2563EB;
}

.auth-btn .action-text {
  color: #2563EB;
}

/* åˆ é™¤æŒ‰é’® */
.delete-btn {
  background-color: #FEF2F2;
  border: 1rpx solid #FECACA;
}

.delete-btn .action-icon {
  color: #DC2626;
}

.delete-btn .action-text {
  color: #DC2626;
}

.fa {
  font-family: 'Font Awesome 6 Free';
  font-size: 26rpx;
  font-style: normal;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.icon {
  font-family: 'Font Awesome 6 Free';
  font-weight: 900;
}

.icon-settings:before {
  content: "\f013"; /* é½¿è½®å›¾æ ‡ */
}

.icon-trash:before {
  content: "\f2ed"; /* åƒåœ¾æ¡¶å›¾æ ‡ */
}

/* ç©ºçŠ¶æ€ */
.empty-state {
  padding: 120rpx 30rpx;
  justify-content: center;
  align-items: center;
}

.empty-title {
  font-size: 32rpx;
  font-weight: 600;
  color: #303133;
  margin-bottom: 12rpx;
}

.empty-subtitle {
  font-size: 26rpx;
  color: #909399;
  margin-bottom: 40rpx;
}

.empty-action {
  background-color: #00C28A;
  padding: 16rpx 48rpx;
  border-radius: 44rpx;
}

.empty-action-text {
  font-size: 28rpx;
  color: #FFFFFF;
  font-weight: 500;
}

/* åŠ è½½çŠ¶æ€ */
.loading-state {
  padding: 120rpx 30rpx;
  justify-content: center;
  align-items: center;
}

/* åº•éƒ¨æç¤º */
.footer-tips {
  padding: 40rpx 30rpx;
  background-color: #FAFBFC;
  border-radius: 16rpx;
  margin: 0 30rpx 30rpx;
}

.tip-item {
  margin-bottom: 12rpx;
}

.tip-item:last-child {
  margin-bottom: 0;
}

.tip-text {
  font-size: 24rpx;
  color: #909399;
  line-height: 1.6;
}
</style> 